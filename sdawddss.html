<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Campus Map – Fixed Labels</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: { primary: '#0ea5e9' },
          animation: { fade: 'fade 0.2s ease-out' },
          keyframes: { fade: { '0%': { opacity: 0, transform: 'scale(0.9)' }, '100%': { opacity: 1, transform: 'scale(1)' } } }
        }
      }
    }
  </script>

  <style>
    .map-wrapper { aspect-ratio: 1200 / 900; }
    .map-img { object-fit: contain; width: 100%; height: 100%; }
    .label {
      position: absolute;
      background: rgba(15,23,42,0.92);
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      pointer-events: none;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity .2s ease, transform .2s ease;
      white-space: nowrap;
      z-index: 10;
      backdrop-filter: blur(4px);
    }
    .label.show {
      opacity: 1;
      transform: scale(1);
      animation: fade 0.2s ease-out;
    }
    .label::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -6px;
      border: 6px solid transparent;
      border-top-color: rgba(15,23,42,0.92);
    }
    .hotspot { transition: fill .2s ease; }
    .hotspot:hover { fill: rgba(59,130,246,0.12); }
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after { transition:none!important; animation:none!important; }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 min-h-screen flex flex-col items-center p-4 md:p-8">

  <header class="w-full max-w-5xl mb-6 text-center">
    <h1 class="text-3xl md:text-4xl font-bold text-slate-800 dark:text-slate-100">Campus Map</h1>
    <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">Hover or tap an area to see its name</p>
  </header>

  <!-- Search -->
  <div class="w-full max-w-5xl mb-6">
    <input id="search" type="search" placeholder="Search building…" 
           class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-primary">
  </div>

  <!-- Map Container -->
  <div class="relative w-full max-w-5xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl overflow-hidden map-wrapper" id="mapContainer">
    
    <!-- Campus Image -->
    <img src="Icogram 2025-10-27 13_49 (1).png" alt="Campus map" class="map-img">

    <!-- SVG Overlay -->
    <svg class="absolute inset-0 w-full h-full" viewBox="0 0 1200 900" preserveAspectRatio="xMidYMid meet" id="svgOverlay">
      <!-- Hotspots + Labels injected by JS -->
    </svg>
  </div>

  <script>
    /* ---------- DATA (Pixel-perfect paths + label positions) ---------- */
    const areas = [
      { path: "M180 540 L180 720 L396 720 L396 540 Z", labelX: 288, labelY: 630, name: "Ground" },
      { path: "M624 336 L624 432 L744 432 L744 336 Z", labelX: 684, labelY: 384, name: "Ground 2" },
      { path: "M936 60 L936 132 L1032 132 L1032 60 Z", labelX: 984, labelY: 96, name: "Basketball Court" },
      { path: "M456 420 L456 660 L636 660 L636 420 Z", labelX: 546, labelY: 540, name: "Stage" },
      { path: "M864 180 L864 324 L1008 324 L1008 180 Z", labelX: 936, labelY: 252, name: "Library" },
      { path: "M180 60 L180 180 L324 180 L324 60 Z", labelX: 252, labelY: 120, name: "Administration" },
      { path: "M780 780 L780 900 L1020 900 L1020 780 Z", labelX: 900, labelY: 840, name: "HM Hall" },
      { path: "M360 300 L360 396 L480 396 L480 300 Z", labelX: 420, labelY: 348, name: "Canteen" },
      { path: "M540 840 L540 900 L684 900 L684 840 Z", labelX: 612, labelY: 870, name: "Science Labs" },
      { path: "M360 456 L360 516 L420 516 L420 456 Z", labelX: 390, labelY: 486, name: "Main Gate" },
      { path: "M480 120 L480 300 L696 300 L696 120 Z", labelX: 588, labelY: 210, name: "Highschool Buildings" },
      { path: "M900 60 L900 156 L996 156 L996 60 Z", labelX: 948, labelY: 108, name: "Chapel" },
      { path: "M60 420 L60 540 L180 540 L180 420 Z", labelX: 120, labelY: 480, name: "Midwifery" },
      { path: "M780 0 L780 96 L900 96 L900 0 Z", labelX: 840, labelY: 48, name: "PMV" },
      { path: "M144 384 L144 480 L240 480 L240 384 Z", labelX: 192, labelY: 432, name: "PT" },
      { path: "M180 300 L180 396 L300 396 L300 300 Z", labelX: 240, labelY: 348, name: "ROTC Building" },
      { path: "M240 180 L240 300 L384 300 L384 180 Z", labelX: 312, labelY: 240, name: "Blue Building" },
      { path: "M360 60 L360 180 L504 180 L504 60 Z", labelX: 432, labelY: 120, name: "Highschool/Comlab" },
      { path: "M480 0 L480 96 L660 96 L660 0 Z", labelX: 570, labelY: 48, name: "Elementary Building" }
    ];

    const svg = document.getElementById('svgOverlay');
    const mapContainer = document.getElementById('mapContainer');
    const search = document.getElementById('search');

    /* ---------- CREATE HOTSPOTS + LABELS ---------- */
    areas.forEach(area => {
      // Hotspot (invisible clickable area)
      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path.setAttribute('d', area.path);
      path.setAttribute('fill', 'transparent');
      path.classList.add('hotspot', 'cursor-pointer');
      path.dataset.name = area.name;
      svg.appendChild(path);

      // Fixed label (inside SVG, so it scales perfectly)
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('x', area.labelX);
      text.setAttribute('y', area.labelY);
      text.setAttribute('text-anchor', 'middle');
      text.setAttribute('dominant-baseline', 'middle');
      text.setAttribute('fill', 'white');
      text.setAttribute('font-size', '28');
      text.setAttribute('font-weight', 'bold');
      text.setAttribute('opacity', '0');
      text.classList.add('label');
      text.textContent = area.name;
      svg.appendChild(text);

      // Store reference
      path.labelElement = text;
    });

    const hotspots = document.querySelectorAll('.hotspot');

    /* ---------- INTERACTION ---------- */
    let activeLabel = null;
    let hideTimer = null;

    function showLabel(hotspot) {
      clearTimeout(hideTimer);
      if (activeLabel) activeLabel.classList.remove('show');
      const label = hotspot.labelElement;
      label.classList.add('show');
      activeLabel = label;
    }

    function hideLabel() {
      hideTimer = setTimeout(() => {
        if (activeLabel) {
          activeLabel.classList.remove('show');
          activeLabel = null;
        }
      }, 150);
    }

    hotspots.forEach(hot => {
      // Desktop hover
      hot.addEventListener('mouseenter', () => showLabel(hot));
      hot.addEventListener('mouseleave', hideLabel);

      // Mobile tap (toggle)
      hot.addEventListener('click', e => {
        e.stopPropagation();
        if (activeLabel && activeLabel === hot.labelElement) {
          hideLabel();
        } else {
          showLabel(hot);
          clearTimeout(hideTimer);
          hideTimer = setTimeout(hideLabel, 4000);
        }
      });

      // Visual feedback
      hot.addEventListener('mouseenter', () => hot.style.fill = 'rgba(59,130,246,0.15)');
      hot.addEventListener('mouseleave', () => {
        if (activeLabel !== hot.labelElement) hot.style.fill = 'transparent';
      });
    });

    // Click outside → hide
    document.addEventListener('click', hideLabel);

    /* ---------- SEARCH ---------- */
    search.addEventListener('input', e => {
      const term = e.target.value.toLowerCase();
      hotspots.forEach(hot => {
        const match = hot.dataset.name.toLowerCase().includes(term);
        hot.style.opacity = match ? '1' : '0.3';
        hot.style.pointerEvents = match ? 'auto' : 'none';
        if (!match && activeLabel === hot.labelElement) hideLabel();
      });
    });
  </script>
</body>
</html>
